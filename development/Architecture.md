# Исследование архитектурного решения

# Содержание

[1 Архитектура To Be](#1-архитектура-to-be)  
[1.1 Определение типа приложения](#11-определение-типа-приложения)  
[1.2 Выбор стратегии развертывания](#12-выбор-стратегии-развертывания)  
[1.3 Обоснование выбора технологии](#13-обоснование-выбора-технологий)  
[1.4 Показатели качества](#14-показатели-качества)  
[1.5 Пути реализации сквозной функциональности](#15-пути-реализации-сквозной-функциональности)<br>
[1.6 Структурная схема приложения](#16-структурная-схема-приложения)<br>
[2 Архитектура As Is](#2-архитектура-as-is)<br>
[3 Вывод](#3-вывод)

# 1 Архитектура To Be

## 1.1 Определение типа приложения

Выбор соответствующего типа приложения - ключевой момент процессса проектирования приложения. 
Разрабатываемое приложение соответствует типу "Веб-приложения для выполнения преимущественно на сервере в сценариях с постоянным подключением".

## 1.2 Выбор стратегии развертывания

При выборе стратегии необходимо найти компромисс между требованиями приложения и соответствующими схемами развертывания, поддерживаемым оборудованием, и ограничениями, налегаемыми средой на варианты развертывания. Все эти факторы будут влиять на проектируемую архитектуру.<br>
Прежде всего, необходимо определить стратегию развертывания: распределенное или нераспределенное развертывание.
В данном приложении все компоненты приложения разворачиваются на одном центральном сервере, а все данные о пользователях, их списке покупок и рецептаххранятся централизованной базе данных.<br>
Таким образом, нераспределённая стратегия может быть проще в реализации и управлении для разработки небольших проектов.

## 1.3 Обоснование выбора технологий

- Spring Boot:
   * Web: Для разработки веб-приложений с использованием Spring MVC.
   * Test: Для написания и выполнения тестов.
   * Security: Для обеспечения безопасности приложения.
   * JPA: Для работы с базой данных через Java Persistence API.
- Lombok: Для уменьшения объема бойлерплейт-кода за счет автоматической генерации методов.
- PostgreSQL: Реляционная база данных, используемая для хранения информации о пользователях и их коллекциях в приложении.

Spring Boot - это фреймворк, который позволяет разрабатывать приложения на языке Java с минимальным уровнем конфигурации. Spring Boot поставляется со встроенными серверами приложений (например, Tomcat, Jetty), что облегчает развертывание приложений без необходимости установки и настройки сторонних серверов.<br>
PostgreSQL - это реляционная база данных с открытым исходным кодом, которая обеспечивает высокую производительность, надежность и расширяемость. Она стремится к максимальной совместимости с ANSI SQL и предоставляет широкий спектр функций, таких как транзакции с ACID-свойствами, механизмы контроля целостности данных и поддержка расширений, что делает ее надежным выбором для критически важных приложений.

## 1.4 Показатели качества

Показатели качества - это свойства системы, отделенные от ее функциональности.
Показатели качества разрабатываемого приложения:

Концептуальная целостность - согласованность и связность дизайна в целом Сюда относится и то, как спроектированы компоненты или модули, и такие факторы как стиль написания кода и именование переменных.

Удобство и простота обслуживания - способность системы изменяться. Это касается изменения компонентов, сервисов, функций и интерфейсов при добавлении или изменении функциональности, исправлении ошибок и реализации новых бизнес-требований.

Доступность - определяет, какую часть времени система функциональна и работает. Доступность может быть измерена как процентное соотношение времени простоя системы за заданный промежуток времени. На доступность оказывают влияние ошибки системы, проблемы инфраструктуры, злонамеренные атаки и нагрузка системы.

Производительность – это показатель, характеризующий скорость, с какой система выполняет любое действие в заданный промежуток времени.

Масштабируемость – это способность системы справляться с увеличением нагрузки без влияния на ее производительность или способность легко расширяться.

Обеспеченность технической поддержкой – это способность системы предоставлять сведения, необходимые для выявления и разрешения проблем при некорректной работе.

Возможность взаимодействия - это способность системы или разных систем успешно работать через взаимодействие и обмен данными с другими внешними системами, созданными и выполняемыми внешними сторонами.

Управляемость - определяет, насколько просто системным администраторам управлять приложением, как правило, посредством достаточного и полезного инструментария, предоставляемого для использования в системах мониторинга, а также для отладки и настройки производительности.

Надежность - это способность системы сохранять работоспособность в течение некоторого времени.

Тестируемость - это мера того, насколько просто создать критерий проверки для системы и ее компонентов и выполнить эти тесты, чтобы определить, отвечает ли система данному критерию.

Удобство и простота использования - определяет, насколько приложение соответствует требованиям пользователя и потребителя с точки зрения понятности, простоты локализации и глобализации, удобства доступа для пользователей с физическими недостатками и обеспечения хорошего взаимодействия с пользователем в общем.

## 1.5 Пути реализации сквозной функциональности

Сквозная функциональность представляет ключевую область дизайна, не связанную с конкретным функционалом приложения.

### Инструментирование и протоколирование

### Аутентификация

В процессе аутентификации пользователей используется механизм базовой аутентификацит через форму (form-based authentication), что является одним из наиболее распространенных способов аутентификации пользователей в веб-приложениях. Пользователь вводит свои учетные данные для аутентификации.
После ввода учетных данных происходит проверка подлинности идентификации пользователя, что обычно делается путем сравнения введенного пароля с хэшированным паролем, сохраненным в базе данных. Если учетные данные пользователя верны и пользователь существует в системе, происходит успешная аутентификация, и пользователю предоставляется доступ к защищенным ресурсам приложения. Если учетные данные неверны или пользователь не существует в системе, пользователь может быть перенаправлен обратно на страницу входа с сообщением об ошибке.

### Авторизация

После успешной аутентификации пользователя приложение проверяет его права доступа к различным ресурсам и функциям.

## 1.6 Структурная схема приложения

![Структурная схема приложения](https://github.com/lizakat/cookerbrain/blob/main/diagrams/Component%20and%20Deployment.png)

# 2 Архитектура As Is

В рамках первого Sprint Review были добавлена аутентификация пользователей и новые методы работы со списком покупок.

![Диаграмма классов](https://github.com/lizakat/cookerbrain/blob/main/development/ClassDiagram.png)

# 3 Вывод

## Сравнение архитектур "As is" и "To be"

В ходе сравнения архитектур можно сделать вывод, что они совпадают.
В архитектуре "To be" Web Server состоит из Application и Databaseы. Application в своем составе содержит User Interface и Web Server и RecipeBook Service, Database - User Databases и другие Databases.
В архитектуре "As is" RecipeBook Service представлен UserController, IngredientController и RecipeController, которые, в свою очередь, используют UserInterface и IngredientUnterface для получения информации о списке покупок. User Database представлена в сервере User. В приложении не реализованы избыточные компоненты из архитектуры "To be".

## Пути улучшения архитектуры

Для улучшения архитектуры следует руководствоваться принциипами проектирования, архитектурными стилями, шаблонами и приемами проектирования.

### Принципы проектирования

### Принципы проектирования ПО

Принцип единственной ответственности (SRP):
   - Каждый класс должен иметь только одну причину для изменения.
   - Этот принцип помогает создать более модульный и легко поддерживаемый код, разделяя функциональность на отдельные компоненты.

Принцип открытости/закрытости (OCP):
   - Сущности программы должны быть открыты для расширения, но закрыты для изменения.
   - Это достигается путем создания абстракций и использования полиморфизма для изменения поведения без изменения исходного кода.

Принцип подстановки Барбары Лисков (LSP):
   - Объекты должны быть заменяемыми экземплярами их подтипов без нарушения корректности программы.
   - Это гарантирует, что код, написанный для базовых классов, будет работать корректно с любыми подклассами этих классов.

Принцип разделения интерфейсов (ISP):
   - Клиенты не должны зависеть от методов, которые они не используют.
   - Интерфейсы должны быть разделены на более маленькие и специфические, чтобы предоставить клиентам только те методы, которые им нужны.

Принцип инверсии зависимостей (DIP):
   - Модули верхнего уровня не должны зависеть от модулей нижнего уровня. Оба должны зависеть от абстракций.
   - Это достигается путем создания абстракций и передачи зависимостей через интерфейсы или абстрактные классы.


### Архитектурные стили и шаблоны

Микросервисная архитектура: разбиение приложения на небольшие сервисы, которые могут быть развернуты и масштабированы независимо друг от друга. Это улучшает производительность и гибкость системы, так как каждый сервис может быть разобран, тестирован и масштабирован отдельно.

### Аудит и рефакторинг

Аудит текущей архитектуры: позволяет выявить недостатки и проблемы в архитектуре системы. Это может включать анализ производительности, безопасности, масштабируемости и гибкости.

Рефакторинг с учетом принципов проектирования: после аудита системы производится изменение кода с целью улучшения его качества (разделение классов, устранение дублирования кода, улучшение читаемости).

